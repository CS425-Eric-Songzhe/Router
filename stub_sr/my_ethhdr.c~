

#include <stdio.h>  

#include "sr_protocol.h"

// make ethernet header with fields 
void make_ethhdr(struct sr_ethernet_hdr* ethhdr, uint16_t type, uint8_t* src, uint8_t* dst){

  int i;     
  uint8_t sbuf[ETHER_ADDR_LEN], dbuf[ETHER_ADDR_LEN];      

  // read to buffer in case we are overwriting in place    
  for (i = 0; i < ETHER_ADDR_LEN; i++) {        
    sbuf[i] = src[i];        
    dbuf[i] = dst[i];     
  }     

  ethhdr->ether_type = htons(type);
    
  for (i = 0; i < ETHER_ADDR_LEN; i++) {      
    ethhdr->ether_shost[i] = sbuf[i];     
    ethhdr->ether_dhost[i] = dbuf[i];  
  }

}



void print_ethhdr(struct sr_ethernet_hdr* ethhdr){
      
  printf("---- ETHERNET HEADER ----\n");     
  
  int i = 0;

  printf("Destination Ethernet Address: "); 
  for (i = 0; i < ETHER_ADDR_LEN; i++) {   
    fprintf(stdout, "%2.2x", ethhdr->ether_dhost[i]); 
  } 
  printf("\n");      
  
  printf("Source Ethernet Address: ");  
  for (i = 0; i < ETHER_ADDR_LEN; i++) {         
    fprintf(stdout, "%2.2x", ethhdr->ether_shost[i]);
  } 
  printf("\n");   

  fprintf(stdout, "Packet Type ID: %4.4x\n", ntohs(ethhdr->ether_type));
  
  printf("-------------------------\n");

}
